<div class="modal-container" [style]="{'background': 'var(--modal-bg)', 'border': '1px solid var(--modal-border)'}">
  <div class="modal-header">
    <h4 [style]="{'color': 'var(--text-color)'}">{{ modalTitle }}</h4>
    <button
      type="button"
      class="close-btn"
      [style]="{'color': 'var(--text-color)'}"
      aria-label="Close"
      (click)="closeModal()"
    >
      <svg
        width="24"
        height="24"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        ></path>
      </svg>
    </button>
  </div>

  <div class="form-content">
    <div class="form-row">
      <div class="form-group">
        <input
          type="text"
          [(ngModel)]="firstname"
          name="fname"
          id="fname"
          [placeholder]="firstNamePlaceholder"
          class="form-input"
          [class.shake]="inputErrors.firstname"
          [class.error-border]="inputErrors.firstname"
          required
        />
      </div>
      <div class="form-group">
        <input
          [(ngModel)]="lastname"
          type="text"
          name="lname"
          id="lname"
          [placeholder]="lastNamePlaceholder"
          class="form-input"
          [class.shake]="inputErrors.lastname"
          [class.error-border]="inputErrors.lastname"
          required
        />
      </div>
    </div>

    <div class="form-group">
      <input
        type="text"
        [(ngModel)]="address"
        name="address"
        id="address"
        [placeholder]="addressPlaceholder"
        class="form-input"
        [class.shake]="inputErrors.address"
        [class.error-border]="inputErrors.address"
        required
      />
    </div>

    <div class="form-group">
      <input
        type="email"
        [(ngModel)]="email"
        name="email"
        id="email"
        [placeholder]="emailPlaceholder"
        class="form-input"
        [class.shake]="inputErrors.email"
        [class.error-border]="inputErrors.email"
        required
        (blur)="emailTouched = true"
        (input)="inputErrors.email = false"
      />
      <div *ngIf="inputErrors.email && emailTouched" class="error-message">
        Please enter a valid email.
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="birthday" class="form-label" [style]="{'color': 'var(--text-color)'}">
          {{ birthdayLabel }}
        </label>
        <input
          type="date"
          [(ngModel)]="birthdate"
          name="birthday"
          id="birthday"
          class="form-input"
          [class.shake]="inputErrors.birthdate"
          [class.error-border]="inputErrors.birthdate"
          required
          [max]="maxBirthdate"
        />
      </div>

      <div class="form-group">
        <label for="gender" class="form-label" [style]="{'color': 'var(--text-color)'}">
          {{ genderLabel }}
        </label>
        <select
          [(ngModel)]="gender"
          name="gender"
          id="gender"
          class="form-select"
          [class.shake]="inputErrors.gender"
          [class.error-border]="inputErrors.gender"
          required
        >
          <option *ngFor="let option of genderOptions" [value]="option">
            {{ option }}
          </option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <input
        type="text"
        [(ngModel)]="nationality"
        name="nationality"
        id="nationality"
        [placeholder]="nationalityPlaceholder"
        class="form-input"
        [class.shake]="inputErrors.nationality"
        [class.error-border]="inputErrors.nationality"
        required
      />
    </div>

    <div class="form-group">
      <input
        [(ngModel)]="password"
        type="password"
        name="passwordr"
        id="passwordr"
        [placeholder]="passwordPlaceholder"
        class="form-input"
        pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
        title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
        [class.shake]="inputErrors.password"
        [class.error-border]="inputErrors.password"
        required
      />
    </div>

    <div class="form-group">
      <input
        [(ngModel)]="confirmpassword"
        type="password"
        name="confirm_password"
        id="confirm_password"
        [placeholder]="confirmPasswordPlaceholder"
        class="form-input"
        [class.shake]="inputErrors.confirmpassword"
        [class.error-border]="inputErrors.confirmpassword"
        required
      />
    </div>

    <div class="error-message" id="message"></div>

    <div class="form-actions">
      <button
        (click)="request()"
        type="submit"
        class="submit-btn"
      >
        {{ requestButtonText }}
      </button>
    </div>
  </div>
</div>

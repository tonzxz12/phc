<div class="max-h-[80vh] overflow-y-auto p-4 bg-[var(--body-color)] rounded-lg">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
      <div>
        <h2 class="text-2xl font-bold" style="color: var(--text-color);">Question Bank</h2>
        <p style="color: var(--input-placeholder);">Select questions to add to your quiz</p>
      </div>
      <div class="flex gap-2">
        <button 
          (click)="closeModal()"
          class="px-4 py-2 rounded-lg transition-colors duration-200" style="background-color: var(--btn-secondary-bg); color: var(--btn-secondary-text);">
          <span class="material-icons mr-2">close</span>
          Close
        </button>
        <button 
          (click)="addSelectedQuestionsToQuiz()"
          [disabled]="selectedQuestions.size === 0"
          class="px-4 py-2 rounded-lg disabled:cursor-not-allowed transition-colors duration-200" style="background-color: var(--btn-primary-bg); color: var(--btn-primary-text);">
          Add Selected ({{ selectedQuestions.size }})
        </button>
      </div>
    </div>
  
    <!-- Filters -->
    <div class="rounded-lg p-4 mb-6" style="background-color: var(--card-bg); box-shadow: var(--card-shadow);">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <!-- Category Filter -->
        <div>
          <label class="block text-sm font-medium mb-1" style="color: var(--text-color);">Category</label>
          <select 
            [(ngModel)]="selectedCategory" 
            (change)="onCategoryChange()"
            class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2" style="background-color: var(--input-bg); border-color: var(--input-border); color: var(--input-text);">
            <option value="all">All Categories</option>
            <option *ngFor="let category of categories" [value]="category">
              {{ category }}
            </option>
          </select>
        </div>
  
        <!-- Type Filter -->
        <div>
          <label class="block text-sm font-medium mb-1" style="color: var(--text-color);">Question Type</label>
          <select 
            [(ngModel)]="selectedType" 
            (change)="onTypeChange()"
            class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2" style="background-color: var(--input-bg); border-color: var(--input-border); color: var(--input-text);">
            <option *ngFor="let type of questionTypes" [value]="type.value">
              {{ type.label }}
            </option>
          </select>
        </div>
  
        <!-- Search -->
        <div>
          <label class="block text-sm font-medium mb-1" style="color: var(--text-color);">Search</label>
          <input 
            type="text" 
            [(ngModel)]="searchTerm" 
            (input)="onSearch()"
            placeholder="Search questions..."
            class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2" style="background-color: var(--input-bg); border-color: var(--input-border); color: var(--input-text);">
        </div>
  
        <!-- Refresh Button -->
        <div class="flex items-end">
          <button 
            (click)="loadQuestions()"
            [disabled]="loading"
            class="w-full px-4 py-2 rounded-md disabled:cursor-not-allowed transition-colors duration-200" style="background-color: var(--btn-secondary-bg); color: var(--btn-secondary-text);">
            <span *ngIf="loading" class="inline-flex items-center">
              <svg class="animate-spin -ml-1 mr-2 h-4 w-4" style="color: var(--btn-secondary-text);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Loading...
            </span>
            <span *ngIf="!loading">Refresh</span>
          </button>
        </div>
      </div>
    </div>
  
    <!-- Questions List -->
    <div class="rounded-lg" style="background-color: var(--card-bg); box-shadow: var(--card-shadow);">
      <div *ngIf="loading" class="p-8 text-center">
        <div class="inline-flex items-center justify-center w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto"></div>
        <p class="mt-2" style="color: var(--input-placeholder);">Loading questions...</p>
      </div>
  
      <div *ngIf="!loading && questions.length === 0" class="p-8 text-center">
        <div class="text-gray-400 mb-4">
          <svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
        </div>
        <p style="color: var(--input-placeholder);">No questions found. Try adjusting your filters or create some questions first.</p>
      </div>
  
      <div *ngIf="!loading && questions.length > 0" class="divide-y" style="border-color: var(--card-border);">
        <div 
          *ngFor="let question of questions" 
          class="p-4 transition-colors duration-200" style="background-color: var(--card-bg);" onmouseover="this.style.backgroundColor='var(--table-row-hover)'" onmouseout="this.style.backgroundColor='var(--card-bg)'">
          
          <!-- Question Header -->
          <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-3">
            <div class="flex items-center space-x-3">
              <input 
                type="checkbox" 
                [checked]="isQuestionSelected(question.id)"
                (change)="toggleQuestionSelection(question.id)"
                class="h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 focus:ring-2">
              
              <div class="flex flex-wrap items-center gap-2">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                  {{ getQuestionTypeLabel(question.type) }}
                </span>
                <span *ngIf="question.category" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                  {{ question.category }}
                </span>
              </div>
            </div>
            
            <div class="text-sm sm:text-right" style="color: var(--input-placeholder);">
              Created by {{ question.firstname }} {{ question.lastname }}
            </div>
          </div>
  
          <!-- Question Content -->
          <div class="ml-7">
            <h3 class="text-lg font-medium mb-2" style="color: var(--text-color);">
              {{ getQuestionPreview(question.question) }}
            </h3>
            
            <div class="text-sm mb-2" style="color: var(--input-placeholder);">
              <strong>Answer:</strong> {{ getAnswerPreview(question.answer) }}
            </div>
            
            <div *ngIf="question.options" class="text-sm" style="color: var(--input-placeholder);">
              <strong>Options:</strong> {{ question.options }}
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
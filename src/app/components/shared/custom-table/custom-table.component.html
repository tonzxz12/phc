<div class="custom-table-container">
  <table class="w-full">
    <thead>
      <tr style="background-color: var(--table-header-bg);">
        <th *ngFor="let col of columns" class="px-4 py-3 text-left" style="color: var(--text-color);">{{ col.header }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of paginatedData; let i = index" 
          class="border-b transition-colors duration-200 hover:bg-gray-50 cursor-pointer" 
          style="border-color: var(--card-border); color: var(--text-color);"
          (click)="onRowClick(row)">
        <td *ngFor="let col of columns" class="px-4 py-3">
          <!-- Regular content -->
          <span *ngIf="col.field !== 'actions'">{{ row[col.field] }}</span>
          
          <!-- Actions column -->
          <div *ngIf="col.field === 'actions'" class="flex justify-center gap-2">
            <!-- Quiz actions -->
            <ng-container *ngIf="row.title">
              <button (click)="$event.stopPropagation(); onActionClick('edit', row)" 
                      class="action-btn-edit flex items-center justify-center w-10 h-10 text-white rounded-full transition-all duration-200 hover:scale-105">
                <i class="fas fa-edit"></i>
              </button>
              <button (click)="$event.stopPropagation(); onActionClick('delete', row)" 
                      class="action-btn-delete flex items-center justify-center w-10 h-10 text-white rounded-full transition-all duration-200 hover:scale-105">
                <i class="fas fa-trash-alt"></i>
              </button>
            </ng-container>
            
            <!-- Student actions (for manage class component) -->
            <ng-container *ngIf="row.fullName && row.id">
              <button (click)="$event.stopPropagation(); onActionClick('remove', row)" 
                      class="action-btn-delete flex items-center justify-center w-10 h-10 text-white rounded-full transition-all duration-200 hover:scale-105"
                      style="background-color: var(--alert-error-border);"
                      title="Remove Student from Class">
                <i class="fas fa-user-minus"></i>
              </button>
            </ng-container>
            
            <!-- Student actions -->
            <ng-container *ngIf="row.name && !row.title && !row.fullName">
              <button (click)="$event.stopPropagation(); onActionClick('feedback', row)" 
                      class="analytics-feedback-btn p-2 rounded transition-all duration-200 hover:scale-105" 
                      style="background-color: var(--btn-primary-bg); color: white;"
                      title="Send Feedback">
                <i class="pi pi-comments"></i>
              </button>
            </ng-container>
            
            <!-- Submission actions -->
            <ng-container *ngIf="row.studentName || row.assignmenttitle">
              <button (click)="$event.stopPropagation(); onActionClick('view', row)" 
                      class="action-btn-view flex items-center justify-center w-10 h-10 text-white rounded-full transition-all duration-200 hover:scale-105"
                      style="background-color: var(--btn-primary-bg);"
                      title="View and Grade Submission">
                <i class="fas fa-eye"></i>
              </button>
            </ng-container>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  
  <!-- Pagination -->
  <div *ngIf="paginator" class="pagination-container flex items-center justify-between px-4 py-3 border-t" style="border-color: var(--card-border); background-color: var(--card-bg);">
    <div class="text-sm" style="color: var(--text-color);">
      Showing {{ data.length > 0 ? (currentPage * rows) + 1 : 0 }} to {{ Math.min((currentPage + 1) * rows, data.length) }} of {{ data.length }} entries
    </div>
    <div class="flex items-center space-x-2">
      <button 
        (click)="prevPage()" 
        [disabled]="currentPage === 0 || data.length === 0"
        class="pagination-btn px-3 py-1 rounded border" 
        style="border-color: var(--input-border); background-color: var(--input-bg); color: var(--input-text);"
        [style.opacity]="currentPage === 0 || data.length === 0 ? '0.5' : '1'">
        Previous
      </button>
      <span class="text-sm" style="color: var(--text-color);">{{ data.length > 0 ? currentPage + 1 : 0 }} / {{ totalPages || 1 }}</span>
      <button 
        (click)="nextPage()" 
        [disabled]="currentPage >= totalPages - 1 || data.length === 0"
        class="pagination-btn px-3 py-1 rounded border" 
        style="border-color: var(--input-border); background-color: var(--input-bg); color: var(--input-text);"
        [style.opacity]="currentPage >= totalPages - 1 || data.length === 0 ? '0.5' : '1'">
        Next
      </button>
    </div>
  </div>
</div>
